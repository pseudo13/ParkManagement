(this["webpackJsonppark-management"]=this["webpackJsonppark-management"]||[]).push([[0],{10:function(e,n,t){e.exports=t(16)},15:function(e,n,t){},16:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),i=t(3),o=t.n(i),c=(t(15),t(6)),l=t(7),s=t(1),u=t(4),p=t(8),m=t(5),f=t(9),d=new(t(18).a),v=function(e){return d.next({place:e})},h=function(){return d.asObservable()},k=function(e){function n(e){var t;return Object(s.a)(this,n),(t=Object(p.a)(this,Object(m.a)(n).call(this,e))).place=void 0,t.subscriptions=void 0,t.place=t.props.place,t.state={occupied:!1},t}return Object(f.a)(n,e),Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.subscriptions=h().subscribe((function(n){var t=n.place;e.place.level==t.level&&e.place.columnIndex==t.columnIndex&&e.place.rowIndex==t.rowIndex&&e.setState({occupied:t.occupied})}))}},{key:"componentWillMount",value:function(){this.subscriptions&&this.subscriptions.unsubscribe()}},{key:"render",value:function(){return r.a.createElement("span",{className:["park-place",this.state.occupied?"occupied":"open"].join(" ")},this.place.rowIndex+"_"+this.place.columnIndex)}}]),n}(r.a.Component),w=function(e){var n=e.parkingRow;return r.a.createElement(a.Fragment,null,n.columns.map((function(e,n){return r.a.createElement(k,{"custom-park-place":e.level+"_"+e.rowIndex+"_"+n,place:e,key:e.level+"_"+e.rowIndex+"_"+n})})))},g=function(e){var n=e.parkLevel;return r.a.createElement(r.a.Fragment,null,r.a.createElement("strong",null,"Park number : ",n.level),n.parkingRows.map((function(e,n){return r.a.createElement("div",null,r.a.createElement(w,{"custom-park-row":e.level+"_"+n,key:e.level+"_"+n,parkingRow:e}))})))},b=function e(n,t,a){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(s.a)(this,e),this.level=void 0,this.columnIndex=void 0,this.rowIndex=void 0,this.occupied=!1,this.level=n,this.rowIndex=t,this.columnIndex=a,this.occupied=r},I=function e(n,t){var a=this;Object(s.a)(this,e),this.level=void 0,this.columns=void 0,this.level=n,this.columns=Array(9).fill({}).map((function(e,n){return new b(a.level,t,n)}))},y=function e(n,t){Object(s.a)(this,e),this.parkingRows=[],this.level=void 0,this.level=n;for(var a=0;a<t;a++)this.parkingRows.push(new I(this.level,a))};var E=function(){var e,n=Array.apply(void 0,Object(l.a)(Array(3))).map((function(e,n){return new y(n,4)})),t=Object(a.useState)({displayMessage:"Park is free. Please come in."}),i=Object(c.a)(t,2),o=i[0],s=i[1];Object(a.useEffect)((function(){window.addEventListener("message",u)}),[]);var u=function(e){"START_SIMULATING"===e.data?p():"STOP_SIMULATING"==e.data&&f()},p=function(){e=window.setInterval((function(){10*Math.random()<=7?d():h()}),500)},m={},f=function(){clearInterval(e)},d=function(){for(var e=0;e<n.length;e++){var t=(m[e]=n[e].parkingRows.map((function(e){return e.columns.map((function(e){return e}))})).flat()).find((function(e){return!e.occupied}));if(t){t.occupied=!0,v(t),0==n.map((function(e){return e.parkingRows.map((function(e){return e.columns.map((function(e){return e}))}))})).flat().flat().filter((function(e){return!e.occupied})).length&&s({displayMessage:"Park is full. Please wait."});break}}},h=function(){var e=n.map((function(e){return e.parkingRows.map((function(e){return e.columns.map((function(e){return e}))}))})).flat().flat(),t=e.filter((function(e){return e.occupied}));console.log(e,t);try{var a=t[Math.floor(Math.random()*t.length)];a.occupied=!1,v(a),s({displayMessage:"Park is free. Please come in."})}catch(r){}};return r.a.createElement("div",{className:"App"},r.a.createElement("button",{onClick:p},"Start simulating cars"),r.a.createElement("button",{onClick:f},"Stop simulationg cars"),r.a.createElement("h3",null,o.displayMessage),r.a.createElement("hr",null),n.map((function(e,n){return r.a.createElement("div",{className:"park-level",key:n},r.a.createElement(g,{"custom-park-level":n,parkLevel:e,key:n.toString()}))})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.05f50622.chunk.js.map